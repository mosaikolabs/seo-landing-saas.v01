---
// src/components/landing/SolutionSection.astro
import Button from '../ui/Button.astro';
import Card from '../ui/Card.astro';

interface FeatureItem {
  title: string;
  description: string;
  icon: string;
  ctaText?: string;
  ctaLink?: string;
}

interface Props {
  title?: string;
  subtitle?: string;
  features?: FeatureItem[];
  mainCtaText?: string;
  mainCtaLink?: string;
}

const {
  title = 'Nuestra solución integral para joyerías',
  subtitle = 'Diseñamos estrategias personalizadas que generan resultados reales y medibles para su negocio',
  features = [
    {
      title: 'SEO Técnico Avanzado',
      description: 'Optimizamos el rendimiento, velocidad y arquitectura de su sitio web para que sea amigable tanto para los motores de búsqueda como para sus visitantes.',
      icon: 'M13 10V3L4 14h7v7l9-11h-7z',
      ctaText: 'Ver análisis técnico',
      ctaLink: '#analisis-tecnico',
    },
    {
      title: 'Contenido Especializado',
      description: 'Creamos contenido único y relevante que resalta la calidad de sus joyas, atrae a su público objetivo y mejora su posicionamiento en buscadores.',
      icon: 'M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10',
      ctaText: 'Ver ejemplos',
      ctaLink: '#ejemplos-contenido',
    },
    {
      title: 'Estrategia de Palabras Clave',
      description: 'Identificamos las palabras clave más rentables para su negocio y las integramos estratégicamente en su sitio web para atraer el tráfico adecuado.',
      icon: 'M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7',
      ctaText: 'Análisis gratuito',
      ctaLink: '#analisis-keywords',
    },
    {
      title: 'Optimización Local',
      description: 'Mejoramos su visibilidad en las búsquedas locales para que los clientes cercanos puedan encontrarlo fácilmente cuando busquen joyerías en su área.',
      icon: 'M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z',
      ctaText: 'Mejorar visibilidad local',
      ctaLink: '#seo-local',
    },
    {
      title: 'Análisis de Competencia',
      description: 'Estudiamos a sus competidores para identificar oportunidades y desarrollar estrategias que lo destaquen en el mercado de la joyería.',
      icon: 'M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0l5-5m-5 0l5 5',
      ctaText: 'Ver análisis competitivo',
      ctaLink: '#analisis-competencia',
    },
    {
      title: 'Informes de Rendimiento',
      description: 'Reciba informes mensuales detallados que muestran el crecimiento de su negocio en línea y el retorno de su inversión.',
      icon: 'M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z',
      ctaText: 'Ver informe de muestra',
      ctaLink: '#informe-muestra',
    },
  ],
  mainCtaText = 'Solicitar Consulta Gratuita',
  mainCtaLink = '#contacto',
} = Astro.props;
---

<section id="solucion" class="py-16 bg-white overflow-hidden">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="lg:text-center">
      <h2 class="text-3xl font-extrabold text-gray-900 sm:text-4xl">
        {title}
      </h2>
      <p class="mt-4 max-w-2xl text-xl text-gray-500 lg:mx-auto">
        {subtitle}
      </p>
    </div>

    <div class="mt-16">
      <div class="grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-3">
        {features.map((feature, index) => (
          <div 
            key={index}
            class="solution-feature transform transition-all duration-300 hover:scale-105"
          >
            <Card 
              variant="default"
              className="h-full flex flex-col"
            >
              <div class="flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-md bg-primary/10 text-primary">
                <svg 
                  class="h-6 w-6" 
                  xmlns="http://www.w3.org/2000/svg" 
                  fill="none" 
                  viewBox="0 0 24 24" 
                  stroke="currentColor"
                  aria-hidden="true"
                >
                  <path 
                    stroke-linecap="round" 
                    stroke-linejoin="round" 
                    stroke-width="2" 
                    d={feature.icon} 
                  />
                </svg>
              </div>
              <h3 class="mt-4 text-lg font-medium text-gray-900">
                {feature.title}
              </h3>
              <p class="mt-2 text-base text-gray-500 flex-grow">
                {feature.description}
              </p>
              {feature.ctaText && feature.ctaLink && (
                <div class="mt-4">
                  <a 
                    href={feature.ctaLink} 
                    class="text-base font-medium text-primary hover:text-primary/80"
                  >
                    {feature.ctaText}
                    <span aria-hidden="true"> &rarr;</span>
                  </a>
                </div>
              )}
            </Card>
          </div>
        ))}
      </div>
    </div>

    <div class="mt-16 text-center">
      <Button 
        href={mainCtaLink}
        variant="primary"
        size="xl"
        class="inline-flex items-center px-8 py-4 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-primary hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary"
      >
        {mainCtaText}
        <svg class="ml-3 -mr-1 h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
          <path fill-rule="evenodd" d="M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd" />
        </svg>
      </Button>
      
      <p class="mt-4 text-sm text-gray-500">
        Sin compromiso. Sin tarjeta de crédito. Cancelación en cualquier momento.
      </p>
    </div>
  </div>
</section>

<style>
  /* Animar las tarjetas al hacer scroll */
  .solution-feature {
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.6s ease-out, transform 0.6s ease-out;
  }
  
  .solution-feature.visible {
    opacity: 1;
    transform: translateY(0);
  }
  
  /* Efecto hover para las tarjetas */
  .solution-feature:hover {
    z-index: 10;
  }
  
  /* Mejoras de accesibilidad */
  .solution-feature:focus-within {
    outline: 2px solid var(--color-primary);
    outline-offset: 4px;
    border-radius: 0.5rem;
  }
  
  /* Ajustes responsivos */
  @media (max-width: 1024px) {
    .solution-feature {
      opacity: 1;
      transform: none;
    }
  }
  
  /* Estilos para el icono */
  .feature-icon {
    transition: transform 0.3s ease;
  }
  
  .solution-feature:hover .feature-icon {
    transform: rotate(-5deg) scale(1.1);
  }
  
  /* Efecto de sombra al pasar el ratón */
  .solution-feature:hover .card {
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  }
</style>

<script>
  // Animación al hacer scroll
  document.addEventListener('DOMContentLoaded', () => {
    const features = document.querySelectorAll('.solution-feature');
    
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
          // Opcional: Dejar de observar una vez que se ha mostrado
          observer.unobserve(entry.target);
        }
      });
    }, {
      threshold: 0.1,
      rootMargin: '0px 0px -50px 0px'
    });
    
    features.forEach(feature => {
      observer.observe(feature);
    });
    
    // Asegurarse de que las tarjetas sean accesibles por teclado
    features.forEach((feature, index) => {
      feature.setAttribute('tabindex', '0');
      feature.setAttribute('aria-label', `Característica ${index + 1}: ${feature.querySelector('h3').textContent}`);
      
      feature.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          const link = feature.querySelector('a');
          if (link) link.click();
        }
      });
    });
  });
</script>
